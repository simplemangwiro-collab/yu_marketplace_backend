{% extends "base.html" %}

{% block content %}
  <h2 class="mb-4">Seller Dashboard</h2>

  {% if products %}
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Product</th>
          <th>Category</th>
          <th>Price</th>
          <th>Posted</th>
          <th>Messages</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
          <tr>
            <td><a href="/item/{{ product['id'] }}">{{ product['product_name'] }}</a></td>
            <td>{{ product['category'] }}</td>
            <td>${{ product['price'] }}</td>
            <td>{{ product['timestamp'][:10] }}</td>
            <td>
              <span class="badge bg-info">
                {{ message_counts.get(product['id'], 0) }}
              </span>
            </td>
            <td>
              <a href="/edit/{{ product['id'] }}" class="btn btn-sm btn-warning">Edit</a>
              <form method="POST" action="/delete/{{ product['id'] }}" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>You havenâ€™t posted any products yet.</p>
  {% endif %}

  <a href="/add" class="btn btn-primary mt-3">Add New Product</a>
{% endblock %}
